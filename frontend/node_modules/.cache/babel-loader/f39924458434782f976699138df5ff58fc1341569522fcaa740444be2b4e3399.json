{"ast":null,"code":"var _jsxFileName = \"/Users/rohithkumar/Documents/MySites/Vanatvam/frontend/src/components/Admin/QuotaReset.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport api from '../../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst QuotaReset = () => {\n  _s();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState(false);\n  const [resetInfo, setResetInfo] = useState(null);\n  const handleReset = async () => {\n    const confirmMessage = `‚ö†Ô∏è WARNING: This will reset ALL active owners' quota balances to their annual quota amounts.\\n\\n` + `This action will:\\n` + `- Set weekday_balance = weekday_quota for all active users\\n` + `- Set weekend_balance = weekend_quota for all active users\\n` + `- Create transaction records for the reset\\n\\n` + `Are you absolutely sure you want to reset all quotas?`;\n    if (!window.confirm(confirmMessage)) {\n      return;\n    }\n\n    // Final confirmation\n    if (!window.confirm(`Final confirmation: Reset quotas for ALL active owners?`)) {\n      return;\n    }\n    setError('');\n    setSuccess(false);\n    setLoading(true);\n    try {\n      const response = await api.post('/api/admin/reset-all-quotas');\n      setResetInfo(response.data);\n      setSuccess(true);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.detail) || 'Failed to reset quotas');\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Global Quota Reset (ADM-16)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 17\n    }, this), success && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"success\",\n      children: (resetInfo === null || resetInfo === void 0 ? void 0 : resetInfo.message) || 'Quotas reset successfully!'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '20px',\n        backgroundColor: '#fff3cd',\n        borderRadius: '8px',\n        border: '1px solid #ffc107',\n        marginBottom: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          marginTop: 0,\n          color: '#856404'\n        },\n        children: \"\\u26A0\\uFE0F Important Information\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: '#856404',\n          marginBottom: '10px'\n        },\n        children: [\"This action will reset the quota balances for \", /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"ALL active owners\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 57\n        }, this), \" to their annual quota amounts.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        style: {\n          color: '#856404',\n          marginLeft: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"Weekday balance will be set to weekday quota\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"Weekend balance will be set to weekend quota\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"Transaction records will be created for audit purposes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"This is typically done annually (e.g., January 1st)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleReset,\n      className: \"btn btn-danger\",\n      disabled: loading,\n      title: loading ? 'Resetting...' : 'Reset All Quotas',\n      style: {\n        padding: '10px 20px',\n        minWidth: 'auto'\n      },\n      children: loading ? '‚è≥ Resetting...' : 'üîÑ Reset All Quotas'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n};\n_s(QuotaReset, \"2UyOBk0Ixf2P5pltJGK5cVrm+HE=\");\n_c = QuotaReset;\nexport default QuotaReset;\nvar _c;\n$RefreshReg$(_c, \"QuotaReset\");","map":{"version":3,"names":["React","useState","api","jsxDEV","_jsxDEV","QuotaReset","_s","loading","setLoading","error","setError","success","setSuccess","resetInfo","setResetInfo","handleReset","confirmMessage","window","confirm","response","post","data","err","_err$response","_err$response$data","detail","className","children","fileName","_jsxFileName","lineNumber","columnNumber","message","style","padding","backgroundColor","borderRadius","border","marginBottom","marginTop","color","marginLeft","onClick","disabled","title","minWidth","_c","$RefreshReg$"],"sources":["/Users/rohithkumar/Documents/MySites/Vanatvam/frontend/src/components/Admin/QuotaReset.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport api from '../../services/api';\n\nconst QuotaReset: React.FC = () => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState(false);\n  const [resetInfo, setResetInfo] = useState<any>(null);\n\n  const handleReset = async () => {\n    const confirmMessage = `‚ö†Ô∏è WARNING: This will reset ALL active owners' quota balances to their annual quota amounts.\\n\\n` +\n      `This action will:\\n` +\n      `- Set weekday_balance = weekday_quota for all active users\\n` +\n      `- Set weekend_balance = weekend_quota for all active users\\n` +\n      `- Create transaction records for the reset\\n\\n` +\n      `Are you absolutely sure you want to reset all quotas?`;\n    \n    if (!window.confirm(confirmMessage)) {\n      return;\n    }\n\n    // Final confirmation\n    if (!window.confirm(`Final confirmation: Reset quotas for ALL active owners?`)) {\n      return;\n    }\n\n    setError('');\n    setSuccess(false);\n    setLoading(true);\n\n    try {\n      const response = await api.post('/api/admin/reset-all-quotas');\n      setResetInfo(response.data);\n      setSuccess(true);\n    } catch (err: any) {\n      setError(err.response?.data?.detail || 'Failed to reset quotas');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"card\">\n      <h2>Global Quota Reset (ADM-16)</h2>\n      {error && <div className=\"error\">{error}</div>}\n      {success && (\n        <div className=\"success\">\n          {resetInfo?.message || 'Quotas reset successfully!'}\n        </div>\n      )}\n\n      <div style={{ \n        padding: '20px', \n        backgroundColor: '#fff3cd', \n        borderRadius: '8px',\n        border: '1px solid #ffc107',\n        marginBottom: '20px'\n      }}>\n        <h3 style={{ marginTop: 0, color: '#856404' }}>‚ö†Ô∏è Important Information</h3>\n        <p style={{ color: '#856404', marginBottom: '10px' }}>\n          This action will reset the quota balances for <strong>ALL active owners</strong> to their annual quota amounts.\n        </p>\n        <ul style={{ color: '#856404', marginLeft: '20px' }}>\n          <li>Weekday balance will be set to weekday quota</li>\n          <li>Weekend balance will be set to weekend quota</li>\n          <li>Transaction records will be created for audit purposes</li>\n          <li>This is typically done annually (e.g., January 1st)</li>\n        </ul>\n      </div>\n\n      <button \n        onClick={handleReset} \n        className=\"btn btn-danger\" \n        disabled={loading}\n        title={loading ? 'Resetting...' : 'Reset All Quotas'}\n        style={{ padding: '10px 20px', minWidth: 'auto' }}\n      >\n        {loading ? '‚è≥ Resetting...' : 'üîÑ Reset All Quotas'}\n      </button>\n    </div>\n  );\n};\n\nexport default QuotaReset;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}